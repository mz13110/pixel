<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        
        <canvas width="512" height="512"></canvas>
        <input type="range" min="0" max="255">
        <script defer>
            

            let canvas = document.querySelector("canvas")
            let ctx = canvas.getContext("2d")
            
            let img = ctx.createImageData(512, 512);


            function set(x, y, r, g, b) {
                img.data[(s*y+x)*4] = r
                img.data[(s*y+x)*4+1] = g
                img.data[(s*y+x)*4+2] = b
                img.data[(s*y+x)*4+3] = 255
            }

            let s = 512

            function update(hue) {
                for(let x = 0; x < s; x++) {
                    for(let y = 0; y < s; y++) {
                        let color = HSVtoRGB(hue, x/s, y/s)
                        set(x, y, color.r, color.g, color.b)
                    }
                }
                ctx.putImageData(img, 0, 0)
            }
            update(0)
            
            
        </script>
    </body>
</html>